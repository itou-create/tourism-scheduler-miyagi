# 手動テストチェックリスト

オープンデータチャレンジ応募向け実装の動作確認用チェックリストです。

---

## 🔧 前提条件

### 開発環境セットアップ
- [ ] Node.js v18以上がインストールされている
- [ ] 依存関係がインストールされている
  ```bash
  cd client && npm install
  cd ../server && npm install
  ```
- [ ] GTFSデータがインポートされている
  ```bash
  cd server
  npm run import-gtfs
  ```

### サーバー起動
- [ ] バックエンドサーバーが起動している（ポート3001）
  ```bash
  cd server
  npm start
  ```
- [ ] フロントエンドサーバーが起動している（ポート5173）
  ```bash
  cd client
  npm run dev
  ```

---

## 1️⃣ ルーティング・ナビゲーション

### 1.1 ホームページ表示
- [ ] ブラウザで `http://localhost:5173/` にアクセス
- [ ] ヘッダーに「観光周遊スケジュール自動生成」タイトルが表示される
- [ ] ナビゲーションに「ホーム」「About」リンクが表示される
- [ ] 「ホーム」リンクがアクティブ状態（ハイライト）になっている

### 1.2 Aboutページ表示
- [ ] ヘッダーの「About」リンクをクリック
- [ ] `/about` ページに遷移する
- [ ] 「About」リンクがアクティブ状態になる
- [ ] 以下のセクションが表示される:
  - [ ] アプリ概要
  - [ ] 使用しているオープンデータ（仙台市営バス、七ヶ浜町ぐるりんこ）
  - [ ] 追加オープンデータ（Project LINKS、PLATEAU、ほこナビ、気象庁）
  - [ ] 注意書き

### 1.3 出典URLリンク確認
以下のリンクをクリックして、正常に開くことを確認:
- [ ] 宮城県オープンデータポータル: https://miyagi.dataeye.jp/
- [ ] 公共交通オープンデータセンター: https://ckan.odpt.org/
- [ ] Project LINKS: https://project-links.github.io/
- [ ] PLATEAU: https://www.mlit.go.jp/plateau/
- [ ] ほこナビ: https://www.meti.go.jp/policy/mono_info_service/monokoto/hokonavi/
- [ ] 気象庁オープンデータ: https://www.jma.go.jp/bosai/forecast/

### 1.4 ナビゲーション往復
- [ ] Aboutページから「ホーム」リンクをクリック
- [ ] ホームページに戻る
- [ ] 地図とフォームが正常に表示される

---

## 2️⃣ 気象庁オープンデータ連携

### 2.1 天気ウィジェット表示
- [ ] ホームページ左パネル上部に天気ウィジェットが表示される
- [ ] 「天気予報（仙台市）」ヘッダーが表示される
- [ ] 今日の天気が表示される:
  - [ ] 日付（例: 11月29日）
  - [ ] 天気アイコン（☀️、☁️、🌧️、❄️のいずれか）
  - [ ] 天気テキスト（例: 晴れ、曇り、雨）
  - [ ] 降水確率（%表示）
- [ ] 明日の天気が表示される（同上）
- [ ] 「データ出典: 気象庁オープンデータ」が表示される

### 2.2 降水確率による警告表示
- [ ] 降水確率が50%以上の場合、警告メッセージが表示される
  - [ ] 青い背景の警告ボックス
  - [ ] 「降水確率が高いため、屋内スポットを優先します」メッセージ
  - [ ] 情報アイコン（ℹ️）が表示される

### 2.3 API通信エラー処理
- [ ] ネットワークが切断されている状態で確認
- [ ] 天気ウィジェットがエラーなく非表示になる（ユーザーには影響なし）
- [ ] コンソールにエラーメッセージが出力される（開発者ツールで確認）

---

## 3️⃣ Project LINKS（鉄道GTFS）連携

### 3.1 鉄道路線表示切り替えボタン
- [ ] 地図右上に「鉄道路線を表示」チェックボックスが表示される
- [ ] 「Project LINKS」出典表示がある
- [ ] チェックボックスがデフォルトでONになっている

### 3.2 鉄道路線の地図表示
- [ ] 地図上に以下の鉄道路線が破線で表示される:
  - [ ] **仙石線**（水色・破線）
    - あおば通、仙台、榴ヶ岡、宮城野原、陸前原ノ町、苦竹、小鶴新田、福田町、陸前高砂、中野栄、多賀城を結ぶ
  - [ ] **東北本線**（赤・破線）
    - 仙台、東仙台、岩切、利府を結ぶ
  - [ ] **仙山線**（緑・破線）
    - 仙台、東照宮、北仙台、北山、東北福祉大前を結ぶ

### 3.3 鉄道路線のポップアップ
- [ ] 鉄道路線をクリック
- [ ] ポップアップが表示される:
  - [ ] 路線名（例: 仙石線）
  - [ ] 駅数（例: 駅数: 11）

### 3.4 鉄道路線の表示/非表示切り替え
- [ ] 「鉄道路線を表示」チェックボックスをOFFにする
- [ ] 地図から鉄道路線が消える
- [ ] チェックボックスを再度ONにする
- [ ] 鉄道路線が再表示される

---

## 4️⃣ PLATEAU（標高データ）連携

### 4.1 スケジュール生成
- [ ] 検索フォームで以下を入力:
  - 出発地: 仙台駅（lat: 38.2606, lon: 140.8817）
  - テーマ: 歴史
  - 開始時刻: 09:00
  - 滞在時間: 60分
  - 訪問スポット数: 3
- [ ] 「スケジュールを生成」ボタンをクリック
- [ ] スケジュールが生成される

### 4.2 標高情報の表示
生成されたスケジュールの各観光スポットで以下を確認:
- [ ] 標高情報ボックスが表示される（薄紫色の背景）
- [ ] 以下の情報が表示される:
  - [ ] 📍 標高: XXXm（数値）
  - [ ] 坂のきつさ: ★☆☆ または ★★☆ または ★★★
  - [ ] 坂の説明: 「平坦（歩きやすい）」「やや坂あり（普通）」「坂きつい（注意）」のいずれか
  - [ ] データ出典: PLATEAU 3D都市モデル

### 4.3 スポット別の標高確認
以下のスポットが含まれる場合、標高が正しいことを確認:
- [ ] **仙台城跡**: 標高140m、坂きつい（★★★）
- [ ] **瑞鳳殿**: 標高90m、やや坂あり（★★☆）
- [ ] **勾当台公園**: 標高40m、平坦（★☆☆）
- [ ] **仙台朝市**: 標高20m、平坦（★☆☆）

---

## 5️⃣ ルート生成の動作確認

### 5.1 基本的なルート生成
- [ ] スケジュール生成が正常に完了する
- [ ] スケジュール概要が表示される:
  - [ ] 訪問スポット数
  - [ ] 所要時間
  - [ ] 開始時刻
  - [ ] 終了予定時刻
- [ ] タイムラインが表示される
- [ ] 詳細スケジュールが表示される

### 5.2 地図上のマーカー表示
- [ ] 観光スポットマーカーが地図上に表示される
  - [ ] 番号付き青色マーカー（1, 2, 3...）
- [ ] バス停マーカーが表示される
  - [ ] 乗車バス停（オレンジ色）
  - [ ] 降車バス停（緑色）

### 5.3 ルート描画
- [ ] 観光スポット間の移動ルートが描画される:
  - [ ] 徒歩ルート（緑色・破線）
  - [ ] バスルート（青色・実線）
- [ ] ルートをクリックするとポップアップが表示される
  - [ ] 🚶 徒歩ルート
  - [ ] 🚌 バスルート (XX番)

---

## 6️⃣ レスポンシブデザイン

### 6.1 PC表示（1920x1080）
- [ ] ヘッダーが正しく表示される
- [ ] 左パネル（フォーム・スケジュール）が固定幅で表示される
- [ ] 右パネル（地図）が残りの領域を占める
- [ ] 天気ウィジェットが見やすく表示される
- [ ] 鉄道路線切り替えボタンが地図右上に表示される

### 6.2 タブレット表示（768x1024）
- [ ] レイアウトが縦並びに切り替わる
- [ ] ヘッダーのナビゲーションリンクが見やすい
- [ ] フォームとスケジュールが上部に表示される
- [ ] 地図が下部に表示される

### 6.3 スマホ表示（375x667）
- [ ] ヘッダーのフォントサイズが小さくなる
- [ ] ナビゲーションリンクがコンパクトに表示される
- [ ] 天気ウィジェットがコンパクトに表示される
- [ ] フォーム入力欄が画面幅に合わせて調整される
- [ ] スケジュール詳細が読みやすく表示される

---

## 7️⃣ エラーハンドリング

### 7.1 API通信エラー
- [ ] バックエンドサーバーを停止した状態で確認
- [ ] スケジュール生成時にエラーメッセージが表示される
  - [ ] 赤い背景のエラーボックス
  - [ ] 「スケジュール生成に失敗しました」メッセージ
- [ ] アプリケーションがクラッシュしない

### 7.2 無効な入力値
- [ ] 緯度に無効な値（例: 999）を入力
- [ ] スケジュール生成を試みる
- [ ] 適切なエラーメッセージまたはバリデーションが表示される

### 7.3 空のスケジュール
- [ ] 訪問スポット数を0に設定
- [ ] スケジュール生成を試みる
- [ ] 空の状態メッセージまたはエラーが表示される

---

## 8️⃣ パフォーマンス

### 8.1 初期ロード時間
- [ ] ページが5秒以内に読み込まれる
- [ ] 天気情報が10秒以内に取得される
- [ ] 鉄道路線が即座に表示される

### 8.2 スケジュール生成時間
- [ ] スケジュール生成が10秒以内に完了する
- [ ] ローディング表示が適切に表示される
- [ ] 生成中に他の操作がブロックされない

### 8.3 地図操作のスムーズさ
- [ ] 地図のズームがスムーズ
- [ ] 地図のパンがスムーズ
- [ ] マーカークリック時のポップアップが即座に表示される
- [ ] 鉄道路線の表示/非表示切り替えが即座に反映される

---

## 9️⃣ データの正確性

### 9.1 気象庁データ
- [ ] 天気予報が実際の気象庁データと一致する
- [ ] 降水確率の数値が正しい
- [ ] 日付が正しい（今日・明日）

### 9.2 鉄道路線データ
- [ ] 仙石線の駅順序が正しい
- [ ] 東北本線の駅順序が正しい
- [ ] 仙山線の駅順序が正しい
- [ ] 各駅の位置が地図上で正しい

### 9.3 標高データ
- [ ] 仙台城跡などの高台スポットの標高が高い
- [ ] 仙台朝市などの低地スポットの標高が低い
- [ ] 坂のきつさの判定が妥当

---

## 🎯 総合確認

### 最終チェック
- [ ] すべての新機能が正常に動作する
- [ ] 既存機能（バスルート生成、地図表示）が正常に動作する
- [ ] データ出典が適切に表示されている
- [ ] ライセンス情報が表示されている
- [ ] エラーが発生しない
- [ ] コンソールに警告が出ていない（軽微なものは除く）
- [ ] PC・タブレット・スマホで正常に表示される

### ブラウザ互換性
- [ ] Chrome（最新版）で動作確認
- [ ] Firefox（最新版）で動作確認
- [ ] Safari（最新版）で動作確認（Macの場合）
- [ ] Edge（最新版）で動作確認

---

## 📸 スクリーンショット撮影（応募資料用）

以下のスクリーンショットを撮影:
- [ ] ホームページ全体（天気ウィジェット含む）
- [ ] Aboutページ全体（データ出典表示）
- [ ] 天気ウィジェット（降水確率高い場合の警告表示）
- [ ] 地図上の鉄道路線表示（3路線すべて表示）
- [ ] 鉄道路線切り替えボタン
- [ ] スケジュール詳細（標高情報表示）
- [ ] 標高情報のクローズアップ（坂のきつさ表示）
- [ ] スマホ表示（レスポンシブデザイン確認）

---

## ✅ 完了確認

すべてのチェック項目が完了したら、以下にサインしてください:

- **テスト実施日**: _______________
- **テスト実施者**: _______________
- **確認結果**: □ 合格 / □ 不合格
- **備考**: _____________________________________

---

以上、テストお疲れ様でした！

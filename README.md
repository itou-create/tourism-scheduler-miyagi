# 観光周遊スケジュール自動生成アプリ（宮城県版）

## 概要

GTFSデータを活用し、テーマ別「実行可能な」周遊スケジュールを自動生成するWebアプリケーションです。
宮城県（仙台市）のオープンデータを活用したオープンデータチャレンジ向けプロジェクトです。

## デモ動画

アプリの操作方法や機能を紹介したデモ動画をご覧いただけます：

📹 **[YouTubeでデモ動画を視聴する](https://youtu.be/hQBhqN5jGk0?si=EJzXv8orW9ObcSHU)**

## 主な機能

- **GTFS活用**: 公共交通機関の実際の時刻表データを利用した実行可能なスケジュール生成
- **バス路線表示**: 実際のバス路線名・路線番号を表示
- **バス停位置表示**: 地図上に乗車・降車バス停の位置をマーカー表示
- **出発地への帰路**: 最終スポットから出発地点への帰路を自動生成
- **テーマ別提案**: 観光客の興味に応じたスポット選択（歴史、自然、グルメなど）
- **待ち時間最小化**: 効率的な乗り継ぎと移動ルートの最適化
- **景観ルート推薦**: 移動自体を楽しむ新しい観光体験の提供
- **スマホ対応**: レスポンシブデザインでスマートフォンでも快適に利用可能
- **調べ疲れ解消**: 具体的な移動ルートを一括提供

## 実装済みGTFSデータ

- **仙台市営バス**: 335路線、2,147停留所
- **七ヶ浜町民バス「ぐるりんこ」**: 8路線、154停留所

## 技術スタック

### フロントエンド
- React (Vite)
- Leaflet (地図表示)
- Tailwind CSS (スタイリング)
- React Router (ルーティング)

### バックエンド
- Node.js
- Express
- node-gtfs (GTFS処理)
- Google Places API (観光スポット情報)

## セットアップ

### 1. 依存関係のインストール

```bash
# バックエンド
cd server
npm install

# フロントエンド
cd ../client
npm install
```

### 2. 環境変数の設定

`.env.example`を`.env`にコピーし、必要な値を設定してください。

```bash
cp .env.example .env
```

### 3. GTFSデータの準備

アプリは実際のGTFSデータを使用して動作します。以下のGTFSファイルを手動でダウンロードし、`server/gtfs_data/`ディレクトリに配置してください：

1. **仙台市営バス**: [宮城県オープンデータポータル](https://miyagi.dataeye.jp/)からダウンロード
   - ファイル名: `gtfs-jp_sendaicitybus_current_date.zip`

2. **七ヶ浜町民バス「ぐるりんこ」**: [公共交通オープンデータセンター](https://ckan.odpt.org/dataset)からダウンロード
   - ファイル名: `All_Gururinko-20250225.zip`

配置後、GTFSデータをインポート：

```bash
cd server
npm run import-gtfs
```

データの確認：

```bash
node check_gtfs_data.js
```

### 4. アプリケーションの起動

```bash
# バックエンド（別ターミナル）
cd server
npm run dev

# フロントエンド（別ターミナル）
cd client
npm run dev
```

## 使用方法

1. ブラウザで `http://localhost:5173` にアクセス
2. 出発時刻、テーマ、滞在時間などの条件を設定
3. 「スケジュール生成」ボタンをクリック
4. 最適化された周遊ルートと時刻表を確認

## ライセンス

MIT
